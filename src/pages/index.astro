---
// Component Imports:
import MainHead from '../components/MainHead.astro';
import Nav from '../components/Nav/index.astro';
import Hero from '../components/Hero/index.astro';
import Card from "../components/Card/index.astro"
import Footer from '../components/Footer/index.astro';

// Data Fetching: List all blog posts
const blogPosts = await Astro.glob('./blog/post/*.md');

blogPosts.sort(
  (a, b) => (
    new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf()
  )
);

let latestPosts = blogPosts.slice(0, 3);

// Full Astro Component Syntax:
// https://docs.astro.build/core-concepts/astro-components/
---

<html lang="en">

<head>
  <!-- Not necessary if using defaults, keeping for future use -->
  <!-- <MainHead title="James Mejia - Designer & Front-End Developer" /> -->
  <MainHead />
</head>

<body class="page page--home">
  <a href="#main-content" class="skip-to-content">Skip to content</a>
  <header id="top" class="main-header">
    <div class="main-header__inner">
      <Nav />
      <Hero />
    </div>
  </header>
  <main id="main-content">
    <div class="blog-section">
      <h3>Latest posts</h3>
      <ul class="card-group card-group--thirds">
        { latestPosts.map((post, index) => (
          <li class="card-group__item">
            <Card
              variant="xs"
              title={ post.frontmatter.title }
              date={ post.frontmatter.date }
              description={ post.frontmatter.description }
            />
          </li>
        )) }
      </ul>
    </div>
  </main>
  <Footer />
</body>

</html>
